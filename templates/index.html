<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <title>Dice Dreams Reviews</title>
</head>
<body>
    <header>
        <h1>Dice Dreams Reviews Monitor</h1>
    </header>
    <main>
        <form method="post" class="filter-form">
            <label for="date">Select Date:</label>
            <select name="date" id="date">
                {% for date in dates %}
                <option value="{{ date }}" {% if date|string == selected_date|string %}selected{% endif %}>{{ date }}</option>
                {% endfor %}
            </select>

            <label for="category">Select Category:</label>
            <select name="category" id="category">
                {% for cat in categories %}
                <option value="{{ cat }}" {% if cat == selected_category %}selected{% endif %}>{{ cat }}</option>
                {% endfor %}
            </select>

            <button type="submit" class="btn">View Reviews</button>
        </form>

        {% if selected_date and selected_category %}
        <section>
            <h2>{{ count }} {{ selected_category }} Reviews on {{ selected_date }}</h2>

            <h3>Trend Over Last 7 Days</h3>
            <ul class="trend-list">
                {% for t in trend %}
                <li>{{ t.date }}: {{ t.count }} reviews</li>
                {% endfor %}
            </ul>

            <h3>Reviews:</h3>
            <ul class="reviews-list">
                {% for review in reviews %}
                <li>{{ review.content }}</li>
                {% endfor %}
            </ul>
        </section>
        {% endif %}
    </main>
</body>
</html>
